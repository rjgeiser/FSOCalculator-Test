
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="color-scheme" content="light dark">
    <meta name="description" content="Foreign Service Officer Separation Benefits Calculator - Calculate severance pay, FSPS annuity, and health insurance options">
    <meta name="author" content="Roy Geiser">
    <meta name="developer" content="Roy Geiser - Foreign Service Benefits Calculator">
    <title>Foreign Service Officer Separation Benefits Calculator</title>
    
    <!-- Remove CSP for local file execution -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <!-- Performance Optimization: Preload Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header class="header text-center">
            <h1>Foreign Service Officer Separation Benefits Calculator</h1>
            <div class="disclaimer">
                <p><strong>Disclaimer:</strong> This calculator provides estimates based on publicly available information and should be used for planning purposes only. The actual benefits may vary based on individual circumstances, policy changes, and other factors. Please consult with HR or a benefits counselor for official calculations and guidance. Salary figures and allowance rates are updated periodically but may not reflect the most recent changes.</p>
            </div>
        </header>
        <main class="content-wrapper">                       
            <!-- Left Column - Form -->
            <section class="form-column">
                <form id="calculator-form">
                    <!-- Form continues here -->
                    <div class="form-container">
                        <!-- Personal Information Section -->
                        <div class="form-section" data-step="personal">
                            <h3>Personal Information</h3>
                            <div class="form-row">
                                <div class="form-group col-md-6 tooltip">
                                    <label for="fs-grade">Grade Level</label>
                                    <select id="fs-grade" class="form-control" required>
                                        <option value="">Select Grade</option>
                                        <option value="SFS">Senior Foreign Service</option>
                                        <option value="FS-01">FS-01</option>
                                        <option value="FS-02">FS-02</option>
                                        <option value="FS-03">FS-03</option>
                                        <option value="FS-04">FS-04</option>
                                    </select>
                                    <span class="tooltip-text">Your current Foreign Service grade level</span>
                                    <div class="validation-message"></div>
                                </div>

                                <div class="form-group col-md-6">
                                    <label for="fs-step">Step</label>
                                    <select id="fs-step" class="form-control" required>
                                        <option value="">Select Step</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6 tooltip">
                                    <label for="age">Current Age</label>
                                    <select id="age" class="form-control" required>
                                        <option value="">Select Age</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                        <option value="32">32</option>
                                        <option value="33">33</option>
                                        <option value="34">34</option>
                                        <option value="35">35</option>
                                        <option value="36">36</option>
                                        <option value="37">37</option>
                                        <option value="38">38</option>
                                        <option value="39">39</option>
                                        <option value="40">40</option>
                                        <option value="41">41</option>
                                        <option value="42">42</option>
                                        <option value="43">43</option>
                                        <option value="44">44</option>
                                        <option value="45">45</option>
                                        <option value="46">46</option>
                                        <option value="47">47</option>
                                        <option value="48">48</option>
                                        <option value="49">49</option>
                                        <option value="50">50</option>
                                        <option value="51">51</option>
                                        <option value="52">52</option>
                                        <option value="53">53</option>
                                        <option value="54">54</option>
                                        <option value="55">55</option>
                                        <option value="56">56</option>
                                        <option value="57">57</option>
                                        <option value="58">58</option>
                                        <option value="59">59</option>
                                        <option value="60">60</option>
                                        <option value="61">61</option>
                                        <option value="62">62</option>
                                        <option value="63">63</option>
                                        <option value="64">64</option>
                                        <option value="65">65</option>
                                        <option value="66">66</option>
                                        <option value="67">67</option>
                                        <option value="68">68</option>
                                        <option value="69">69</option>
                                        <option value="70">70</option>
                                        <option value="71">71</option>
                                        <option value="72">72</option>
                                        <option value="73">73</option>
                                        <option value="74">74</option>
                                        <option value="75">75</option>
                                        <option value="76">76</option>
                                        <option value="77">77</option>
                                        <option value="78">78</option>
                                        <option value="79">79</option>
                                        <option value="80">80</option>
                                    </select>
                                    <span class="tooltip-text">Your current age</span>
                                </div>
                                
                                <div class="form-group col-md-6 tooltip">
                                    <label for="years-service">Years of Service</label>
                                    <select id="years-service" class="form-control" required onchange="getValidatedServiceDuration()">
                                        <option value="">Select Years</option>
                                        <!-- Options populated by JavaScript -->
                                    </select>
                                    <span class="tooltip-text">Total years of federal service</span>
                                    <!-- Service Duration Warning -->
                                    <div id="service-duration-warning" class="alert alert-warning" 
                                        style="display: none; margin-top: 0.5rem; font-size: 0.85rem; padding: 0.5rem; 
                                        background-color: transparent; border: none;">
                                        <span id="service-duration-message" style="color: #b91c1c;"></span>
                                        <button type="button" class="btn btn-primary btn-sm" onclick="clearSCD()" 
                                            style="padding: 0.25rem 0.5rem; margin-left: 0.5rem; font-size: 0.85rem;">
                                            Clear SCD
                                        </button>
                                    </div>
                                </div>
                            
                            <!-- Replace the current post dropdown with a hidden input -->
                            <input type="hidden" id="current-post" value="Washington, DC">
                            <!-- Remove the entire form-group div containing the dropdown -->

                                <div class="form-group col-md-4 tooltip">
                                    <label for="tera-eligible">VERA & TERA Offered</label>
                                    <select id="tera-eligible" name="tera-eligible" class="form-control">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>

                            <div id="tera-fields" style="display: none;">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="tera-years">VERA & TERA Years of Service</label>
                                        <select id="tera-years" name="tera-years" class="form-control" required>
                                            <option value="10">10 years</option>
                                            <option value="11">11 years</option>
                                            <option value="12">12 years</option>
                                            <option value="13">13 years</option>
                                            <option value="14">14 years</option>
                                            <option value="15" selected>15 years</option>
                                            <option value="16">16 years</option>
                                            <option value="17">17 years</option>
                                            <option value="18">18 years</option>
                                            <option value="19">19 years</option>
                                            <option value="20">20 years</option>
                                        </select>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="tera-age">Age Required (VERA only)</label>
                                        <select id="tera-age" name="tera-age" class="form-control" required>
                                            <option value="40">40 years</option>
                                            <option value="41">41 years</option>
                                            <option value="42">42 years</option>
                                            <option value="43">43 years</option>
                                            <option value="44">44 years</option>
                                            <option value="45" selected>45 years</option>
                                            <option value="46">46 years</option>
                                            <option value="47">47 years</option>
                                            <option value="48">48 years</option>
                                            <option value="49">49 years</option>
                                            <option value="50">50 years</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <script>
                                // Update the TERA toggle functionality
                                function initializeTeraToggle() {
                                    const teraEligible = document.getElementById('tera-eligible');
                                    const teraFields = document.getElementById('tera-fields');
                                    
                                    if (!teraEligible || !teraFields) {
                                        console.warn('V/TERA elements not found');
                                        return;
                                    }

                                    function handleTeraToggle() {
                                        const isVisible = teraEligible.value === 'yes';
                                        
                                        // Update display style
                                        teraFields.style.display = isVisible ? 'block' : 'none';
                                        teraFields.style.visibility = isVisible ? 'visible' : 'hidden';
                                        teraFields.style.height = isVisible ? 'auto' : '0';
                                        
                                        // Update required attributes
                                        const teraInputs = teraFields.querySelectorAll('select');
                                        teraInputs.forEach(input => {
                                            input.required = isVisible;
                                        if (!isVisible) {
                                                input.value = input.id === 'tera-years' ? '15' : '45';
                                            }
                                        });

                                        // Force layout recalculation for iOS
                                        teraFields.style.opacity = '0.99';
                                        setTimeout(() => {
                                            teraFields.style.opacity = '1';
                                        }, 0);

                                        console.log('V/TERA fields visibility updated:', {
                                            isVisible,
                                            display: teraFields.style.display,
                                            visibility: teraFields.style.visibility
                                        });
                                    }

                                    // Add event listeners
                                    teraEligible.addEventListener('change', handleTeraToggle);
                                    teraEligible.addEventListener('touchend', handleTeraToggle);
                                    
                                    // Initial state setup
                                    handleTeraToggle();
                                }

                                // Ensure the function runs after DOM is loaded
                                if (document.readyState === 'loading') {
                                    document.addEventListener('DOMContentLoaded', initializeTeraToggle);
                                } else {
                                    initializeTeraToggle();
                                }
                            </script>

                        <!-- Health Insurance Section -->
                        <div class="form-section" data-step="health">
                            <h3>Health Insurance Information (Optional)</h3>
                            <!-- Health Insurance Plan (full width) -->
                            <div class="form-row">
                                <div class="form-group col-12">
                                    <label for="current-plan">Health Insurance Plan</label>
                                    <select id="current-plan" class="form-control">
                                        <option value="">Select Plan</option>
                                        <option value="BCBS-basic">BCBS Basic</option>
                                        <option value="FSBP-standard">Foreign Service Benefit Plan</option>
                                        <option value="AETNA-direct">Aetna Direct</option>
                                        <option value="GEHA-standard">GEHA Standard</option>
                                        <option value="GEHA-standard">GEHA HDHP</option>
                                        <option value="Compass Rose">Compass Rose</option>
                                        <option value="NALC-High">NALC High</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Enrollment Type and Home State in same row -->
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="coverage-type">Enrollment Type</label>
                                    <select id="coverage-type" class="form-control">
                                        <option value="">Select Type</option>
                                        <option value="self">Self Only</option>
                                        <option value="self-plus-one">Self Plus One</option>
                                        <option value="family">Self and Family</option>
                                    </select>
                                </div>
                                
                                <div class="form-group col-md-6">
                                    <label for="state">Home State of Record</label>
                                    <select id="state" class="form-control">
                                        <option value="">Select a State</option>
                                        <option value="AL">Alabama</option>
                                        <option value="AK">Alaska</option>
                                        <option value="AZ">Arizona</option>
                                        <option value="AR">Arkansas</option>
                                        <option value="CA">California</option>
                                        <option value="CO">Colorado</option>
                                        <option value="CT">Connecticut</option>
                                        <option value="DE">Delaware</option>
                                        <option value="DC">District of Columbia</option>
                                        <option value="FL">Florida</option>
                                        <option value="GA">Georgia</option>
                                        <option value="HI">Hawaii</option>
                                        <option value="ID">Idaho</option>
                                        <option value="IL">Illinois</option>
                                        <option value="IN">Indiana</option>
                                        <option value="IA">Iowa</option>
                                        <option value="KS">Kansas</option>
                                        <option value="KY">Kentucky</option>
                                        <option value="LA">Louisiana</option>
                                        <option value="ME">Maine</option>
                                        <option value="MD">Maryland</option>
                                        <option value="MA">Massachusetts</option>
                                        <option value="MI">Michigan</option>
                                        <option value="MN">Minnesota</option>
                                        <option value="MS">Mississippi</option>
                                        <option value="MO">Missouri</option>
                                        <option value="MT">Montana</option>
                                        <option value="NE">Nebraska</option>
                                        <option value="NV">Nevada</option>
                                        <option value="NH">New Hampshire</option>
                                        <option value="NJ">New Jersey</option>
                                        <option value="NM">New Mexico</option>
                                        <option value="NY">New York</option>
                                        <option value="NC">North Carolina</option>
                                        <option value="ND">North Dakota</option>
                                        <option value="OH">Ohio</option>
                                        <option value="OK">Oklahoma</option>
                                        <option value="OR">Oregon</option>
                                        <option value="PA">Pennsylvania</option>
                                        <option value="RI">Rhode Island</option>
                                        <option value="SC">South Carolina</option>
                                        <option value="SD">South Dakota</option>
                                        <option value="TN">Tennessee</option>
                                        <option value="TX">Texas</option>
                                        <option value="UT">Utah</option>
                                        <option value="VT">Vermont</option>
                                        <option value="VA">Virginia</option>
                                        <option value="WA">Washington</option>
                                        <option value="WV">West Virginia</option>
                                        <option value="WI">Wisconsin</option>
                                        <option value="WY">Wyoming</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Data Entry Section (Optional) -->
                        <div class="form-section">
                            <h3>Advanced Data Entry (Optional)</h3>
                            <div class="form-group">
                                <label for="service-computation-date">Service Computation Date (Optional)</label>
                                <input type="date" id="service-computation-date" class="form-control" 
                                    onchange="getValidatedServiceDuration()"
                                    title="Enter your Service Computation Date for more accurate calculations">
                                <small class="form-text text-muted">If provided, this will be used instead of Years of Service</small>
                            </div>
                            <div class="form-group">
                                <label for="sick-leave-balance">Sick Leave Balance (hours) (Optional)</label>
                                <input type="number" id="sick-leave-balance" class="form-control" placeholder="Enter sick leave balance (optional)" min="0" step="1">
                            </div>
                            <div class="form-group">
                                <label for="annual-leave-balance">Annual Leave Balance (hours) (Optional)</label>
                                <input type="number" id="annual-leave-balance" class="form-control" placeholder="Enter annual leave balance" min="0" step="1">
                            </div>
                        </div>

                        <!-- High-Three Salary Section -->
                        <div class="form-section" data-step="salary">
                            <h3>High-Three Salary Information (Optional)</h3>
                            <p class="form-text">Enter your highest three consecutive years of salary including DC locality pay (optional)</p>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="salary-year-1">Year 1 Salary</label>
                                    <select id="salary-year-1" class="form-control">
                                        <option value="">Select Salary</option>
                                        <option value="92000">$92,000</option>
                                        <option value="97000">$97,000</option>
                                        <option value="102000">$102,000</option>
                                        <option value="107000">$107,000</option>
                                        <option value="112000">$112,000</option>
                                        <option value="117000">$117,000</option>
                                        <option value="122000">$122,000</option>
                                        <option value="127000">$127,000</option>
                                        <option value="132000">$132,000</option>
                                        <option value="137000">$137,000</option>
                                        <option value="142000">$142,000</option>
                                        <option value="147000">$147,000</option>
                                        <option value="152000">$152,000</option>
                                        <option value="157000">$157,000</option>
                                        <option value="162000">$162,000</option>
                                        <option value="167000">$167,000</option>
                                        <option value="172000">$172,000</option>
                                        <option value="177000">$177,000</option>
                                        <option value="182000">$182,000</option>
                                        <option value="187000">$187,000</option>
                                        <option value="192000">$192,000</option>
                                        <option value="197000">$197,000</option>
                                        <option value="202000">$202,000</option>
                                        <option value="205000">$205,000</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="salary-year-2">Year 2 Salary</label>
                                    <select id="salary-year-2" class="form-control">
                                        <option value="">Select Salary</option>
                                        <option value="92000">$92,000</option>
                                        <option value="97000">$97,000</option>
                                        <option value="102000">$102,000</option>
                                        <option value="107000">$107,000</option>
                                        <option value="112000">$112,000</option>
                                        <option value="117000">$117,000</option>
                                        <option value="122000">$122,000</option>
                                        <option value="127000">$127,000</option>
                                        <option value="132000">$132,000</option>
                                        <option value="137000">$137,000</option>
                                        <option value="142000">$142,000</option>
                                        <option value="147000">$147,000</option>
                                        <option value="152000">$152,000</option>
                                        <option value="157000">$157,000</option>
                                        <option value="162000">$162,000</option>
                                        <option value="167000">$167,000</option>
                                        <option value="172000">$172,000</option>
                                        <option value="177000">$177,000</option>
                                        <option value="182000">$182,000</option>
                                        <option value="187000">$187,000</option>
                                        <option value="192000">$192,000</option>
                                        <option value="197000">$197,000</option>
                                        <option value="202000">$202,000</option>
                                        <option value="205000">$205,000</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="salary-year-3">Year 3 Salary</label>
                                    <select id="salary-year-3" class="form-control">
                                        <option value="">Select Salary</option>
                                        <option value="92000">$92,000</option>
                                        <option value="97000">$97,000</option>
                                        <option value="102000">$102,000</option>
                                        <option value="107000">$107,000</option>
                                        <option value="112000">$112,000</option>
                                        <option value="117000">$117,000</option>
                                        <option value="122000">$122,000</option>
                                        <option value="127000">$127,000</option>
                                        <option value="132000">$132,000</option>
                                        <option value="137000">$137,000</option>
                                        <option value="142000">$142,000</option>
                                        <option value="147000">$147,000</option>
                                        <option value="152000">$152,000</option>
                                        <option value="157000">$157,000</option>
                                        <option value="162000">$162,000</option>
                                        <option value="167000">$167,000</option>
                                        <option value="172000">$172,000</option>
                                        <option value="177000">$177,000</option>
                                        <option value="182000">$182,000</option>
                                        <option value="187000">$187,000</option>
                                        <option value="192000">$192,000</option>
                                        <option value="197000">$197,000</option>
                                        <option value="202000">$202,000</option>
                                        <option value="205000">$205,000</option>
                                    </select>
                            </div>
                        </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Calculate Benefits</button>
                        <button type="reset" class="btn btn-secondary">Reset Form</button>
                    </div>
                </form>
            </section>
               <!-- Light & Dark Mode Toggle --> 
              <div class="toggle-overlay">
                <div class="theme-toggle-wrapper">
                <input type="checkbox" id="theme-toggle-checkbox" />
                <span class="slider">
                  <span class="icon light">
                    <!-- Embedded SVG: Sun 2 -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="#f6e05e">
                      <path d="M12 18a6 6 0 100-12 6 6 0 000 12zM12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                  </span>
                  <span class="icon dark">
                    <!-- Moon SVG -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20">
                      <path fill="#4a5568" d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"/>
                    </svg>
                  </span>
                </div>
              </div>
            <!-- Right Column - Results -->
            <section class="results-column">           
                <div id="loading" class="loading-container" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>Calculating your benefits...</p>
                </div>
                <div id="error" class="error-message" style="display: none;"></div>
                <div class="tabs">
                    <div class="tab-buttons">
                        <button class="tab-button" data-tab="severance">Severance</button>
                        <button class="tab-button" data-tab="retirement">Retirement</button>
                        <button class="tab-button" data-tab="health">Health</button>
                        <button class="tab-button" data-tab="lifetime">Lifetime</button>
                    </div>
                    <div id="severance" class="tab-content">
                        <h3>Severance Pay Calculation</h3>
                        <div id="severance-results" class="results-container"></div>
                    </div>
                    <div id="retirement" class="tab-content">
                        <h3>Retirement Calculation</h3>
                        <div id="retirement-results" class="results-container"></div>
                    </div>
                    <div id="health" class="tab-content">
                        <h3>Health Insurance Calculation</h3>
                        <div id="health-results" class="results-container">
  <p id="health-skipped-message" style="display: none; color: #555;">
    You skipped the Health Insurance section. No cost estimates are available. Complete this section to compare FEHB, COBRA, and ACA options.
  </p>
</div>
                    </div>
                    <div id="lifetime" class="tab-content">
                        <h3>Lifetime Benefits Report (to Age 85)</h3>
                        <div id="lifetime-results" class="results-container">
                    </div>
                </div>
            </section>
        </main>
    </div>
    <footer>
        <p>Developed by Roy Geiser | Foreign Service Benefits Calculator</p>
        <p>This calculator is provided for informational purposes only. Please consult with HR for official calculations.</p>
        <p>Â© 2024 Roy Geiser. Licensed under the <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer">MIT License</a>.</p>
    </footer>
    
    <!-- Reference to your main JavaScript file -->
    <script src="js/main.js"></script>
    
    <div class="skip-link" tabindex="0">Skip to main content</div>

<!-- Theme toggle script -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
      const themeToggle = document.getElementById("theme-toggle-checkbox");
    
      // Load saved theme from localStorage on page load
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) {
        document.documentElement.setAttribute("data-theme", savedTheme);
        themeToggle.checked = savedTheme === "dark";
      }
    
      // Listen for user toggle
      themeToggle.addEventListener("change", () => {
        const isDark = themeToggle.checked;
        const theme = isDark ? "dark" : "light";
        document.documentElement.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);
      });
    });
</script>
</body>
</html> 
